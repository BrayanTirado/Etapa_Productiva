{% extends "base.html" %}

{% block title %}Crear Sede{% endblock %}

{% block content %}

<div class="bg-white shadow-2xl rounded-3xl p-10 w-full max-w-lg mx-auto my-20">
    <h2 class="text-4xl font-extrabold text-center text-green-700 mb-8">Crear Nueva Sede</h2>

    <!-- Mensajes flash generales -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="mb-6 space-y-3">
        {% for category, message in messages %}
          {% if category != 'success_sede' %}
          <div class="px-5 py-3 rounded-lg text-center font-medium text-lg
                      {% if category=='error' %}bg-red-500 text-white
                      {% elif category=='success' %}bg-green-500 text-white
                      {% elif category=='warning' %}bg-yellow-400 text-gray-900
                      {% else %}bg-blue-500 text-white{% endif %}">
            {{ message }}
          </div>
          {% endif %}
        {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <!-- Formulario de creación -->
    <form method="POST" action="{{ url_for('coordinador_bp.crear_sede') }}" class="space-y-6">
        <div>
            <label class="block text-gray-700 font-semibold text-lg mb-2">Token de administrador:</label>
            <input type="text" name="token" required
                   placeholder="Ingresa el token suministrado por el administrador"
                   class="w-full px-5 py-3 border border-gray-300 rounded-xl text-lg focus:ring-2 focus:ring-blue-500 shadow-sm">
        </div>

        <div>
            <label class="block text-gray-700 font-semibold text-lg mb-2">Nombre de la sede:</label>
            <input type="text" name="nombre" required
                   class="w-full px-5 py-3 border border-gray-300 rounded-xl text-lg focus:ring-2 focus:ring-blue-500 shadow-sm">
        </div>

        <div>
            <label class="block text-gray-700 font-semibold text-lg mb-2">Ciudad:</label>
            <input type="text" name="ciudad" required
                   class="w-full px-5 py-3 border border-gray-300 rounded-xl text-lg focus:ring-2 focus:ring-blue-500 shadow-sm">
        </div>

        <button type="submit"
                class="w-full bg-green-700 text-white py-3 rounded-xl font-bold text-lg hover:bg-green-400 transition-colors shadow-lg">
            Crear Sede
        </button>
    </form>
</div>

<!-- Modal de éxito -->
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      {% if category == 'success_sede' %}
        <div class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50">
          <div class="bg-white rounded-lg shadow-lg p-6 w-96 text-center">
            <p class="text-lg font-semibold text-gray-800 mb-4">
              {{ message }}
            </p>
            <a href="{{ url_for('coordinador_bp.dashboard') }}" 
               class="px-4 py-2 bg-sena-primary text-white rounded-lg hover:bg-sena-dark transition">
              OK
            </a>
          </div>
        </div>
      {% endif %}
    {% endfor %}
  {% endif %}
{% endwith %}

{% endblock %}
